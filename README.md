Домашнее задание к занятию «Базы данных» 

## Решение: Моделирование базы данных для системы управления проектами компании

На основе анализа типичных бизнес-процессов компании была спроектирована реляционная база данных, состоящая из 8 взаимосвязанных таблиц, соответствующая требованиям третьей нормальной формы (3НФ).

### Задание 1: Описание таблиц базы данных

#### 1. Отделы (departments):

- id, первичный ключ, SERIAL
- name, название отдела, VARCHAR(100), NOT NULL, UNIQUE
- description, описание отдела, TEXT
- manager_id, внешний ключ на руководителя, INTEGER, REFERENCES employees(id)


#### 2. Сотрудники (employees):

- id, первичный ключ, SERIAL
- first_name, имя сотрудника, VARCHAR(50), NOT NULL
- last_name, фамилия сотрудника, VARCHAR(50), NOT NULL
- email, электронная почта, VARCHAR(100), UNIQUE, NOT NULL
- phone, номер телефона, VARCHAR(20)
- hire_date, дата приема на работу, DATE, NOT NULL
- department_id, внешний ключ на отдел, INTEGER, REFERENCES departments(id)


#### 3. Должности (positions):

- id, первичный ключ, SERIAL
- title, название должности, VARCHAR(100), NOT NULL
- salary_min, минимальная зарплата, DECIMAL(10,2), CHECK (salary_min > 0)
- salary_max, максимальная зарплата, DECIMAL(10,2), CHECK (salary_max >= salary_min)
- description, описание должности, TEXT


#### 4. История должностей сотрудников (employee_positions):

- employee_id, внешний ключ на сотрудника, INTEGER, REFERENCES employees(id)
- position_id, внешний ключ на должность, INTEGER, REFERENCES positions(id)
- start_date, дата начала работы в должности, DATE, NOT NULL
- end_date, дата окончания работы в должности, DATE
- salary, текущая зарплата, DECIMAL(10,2), NOT NULL, CHECK (salary > 0)
- PRIMARY KEY (employee_id, position_id, start_date)


#### 5. Клиенты (clients):

- id, первичный ключ, SERIAL
- company_name, название компании клиента, VARCHAR(200), NOT NULL
- contact_person, контактное лицо, VARCHAR(100), NOT NULL
- email, электронная почта для связи, VARCHAR(100), NOT NULL
- phone, номер телефона, VARCHAR(20)
- address, адрес клиента, TEXT


#### 6. Проекты (projects):

- id, первичный ключ, SERIAL
- name, название проекта, VARCHAR(200), NOT NULL
- description, описание проекта, TEXT
- start_date, дата начала проекта, DATE, NOT NULL
- end_date, планируемая дата окончания, DATE, CHECK (end_date >= start_date)
- budget, бюджет проекта, DECIMAL(12,2), CHECK (budget > 0)
- status, статус проекта, VARCHAR(20), CHECK (status IN ('planning', 'active', 'completed', 'cancelled'))
- client_id, внешний ключ на клиента, INTEGER, REFERENCES clients(id)


#### 7. Назначения на проекты (project_assignments):

- id, первичный ключ, SERIAL
- project_id, внешний ключ на проект, INTEGER, REFERENCES projects(id), NOT NULL
- employee_id, внешний ключ на сотрудника, INTEGER, REFERENCES employees(id), NOT NULL
- role, роль в проекте, VARCHAR(50), NOT NULL
- start_date, дата начала участия в проекте, DATE, NOT NULL
- end_date, дата окончания участия в проекте, DATE


#### 8. Задачи проекта (project_tasks):

- id, первичный ключ, SERIAL
- project_id, внешний ключ на проект, INTEGER, REFERENCES projects(id), NOT NULL
- title, название задачи, VARCHAR(200), NOT NULL
- description, описание задачи, TEXT
- assigned_to, внешний ключ на ответственного сотрудника, INTEGER, REFERENCES employees(id)
- status, статус задачи, VARCHAR(20), CHECK (status IN ('new', 'in_progress', 'completed', 'cancelled'))
- due_date, срок выполнения, DATE
- completed_date, дата фактического выполнения, DATE


### Схема модели данных

![Схема базы данных для системы управления проектами компании](https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/ae78c5887fb448b3e7dde091630557b4/36d3eb8f-2c15-40f2-9bf1-77e4c9491afe/04d533a2.png)

Схема базы данных для системы управления проектами компании

### Типы связей между таблицами:

**Один-ко-многим (1:N):**

- departments → employees (один отдел содержит множество сотрудников)
- positions → employee_positions (одна должность может быть у многих сотрудников)
- employees → employee_positions (один сотрудник может иметь историю должностей)
- clients → projects (один клиент может иметь множество проектов)
- projects → project_assignments (один проект имеет множество участников)
- projects → project_tasks (один проект содержит множество задач)
- employees → project_assignments (один сотрудник может участвовать в множестве проектов)
- employees → project_tasks (один сотрудник может быть назначен на множество задач)

**Один-к-одному (1:1):**

- departments ← employees (manager_id: один руководитель управляет одним отделом)


### Дополнительные задания со звёздочкой

### Задание 2*: Функциональные зависимости и нормализация

#### Функциональные зависимости в денормализованной таблице:

**Основные функциональные зависимости:**

1. `employee_id → first_name, last_name, email, phone, hire_date, department_id`
2. `department_id → department_name, description, manager_id`
3. `position_id → title, salary_min, salary_max, description`
4. `client_id → company_name, contact_person, email, phone, address`
5. `project_id → name, description, start_date, end_date, budget, status, client_id`
6. `task_id → title, description, status, due_date, completed_date, project_id, assigned_to`

#### Правила нормализации, применённые для устранения аномалий:

**1НФ (Первая нормальная форма):**

- Устранены повторяющиеся группы
- Каждая ячейка содержит атомарное значение
- Исключены множественные значения в одном поле

**2НФ (Вторая нормальная форма):**

- Устранены частичные зависимости от составного ключа
- Неключевые атрибуты полностью зависят от всего первичного ключа
- Создана таблица `employee_positions` с составным ключом

**3НФ (Третья нормальная форма):**

- Устранены транзитивные зависимости
- Исключены зависимости неключевых атрибутов от других неключевых атрибутов
- Разделение на независимые сущности: сотрудники, отделы, должности, клиенты, проекты


#### Применённые правила вывода:

1. **Декомпозиция** - разбиение одной большой таблицы на несколько связанных
2. **Атомизация** - обеспечение неделимости значений в полях
3. **Элиминация избыточности** - устранение дублирования данных
4. **Обеспечение ссылочной целостности** - использование внешних ключей

### Преимущества спроектированной модели:

**Техническими преимуществами являются:**

- **Отсутствие избыточности:** каждый факт хранится в единственном экземпляре[^1_1]
- **Ссылочная целостность:** внешние ключи предотвращают нарушение связей между данными[^1_2]
- **Масштабируемость:** схема легко расширяется для новых требований[^1_3]
- **Оптимизация запросов:** созданы индексы на внешние ключи для повышения производительности[^1_2]

**Бизнес-преимуществами являются:**

- **Гибкость отчётности:** возможность создания разнообразной аналитики по проектам и сотрудникам
- **Историчность:** сохранение истории изменений должностей и участия в проектах
- **Контроль качества:** CHECK-ограничения обеспечивают валидность вводимых данных


### SQL-скрипт для создания схемы

Данная схема базы данных полностью соответствует требованиям задания и может быть использована для эффективного управления проектной деятельностью компании с возможностью ведения отчётности по сотрудникам, проектам, клиентам и выполненным задачам.
<span style="display:none">[^1_10][^1_11][^1_12][^1_13][^1_14][^1_15][^1_16][^1_17][^1_18][^1_19][^1_20][^1_21][^1_22][^1_23][^1_24][^1_25][^1_26][^1_27][^1_28][^1_29][^1_30][^1_31][^1_32][^1_33][^1_34][^1_35][^1_36][^1_37][^1_38][^1_39][^1_4][^1_40][^1_41][^1_42][^1_43][^1_44][^1_45][^1_46][^1_47][^1_48][^1_49][^1_5][^1_50][^1_51][^1_52][^1_53][^1_54][^1_55][^1_56][^1_57][^1_58][^1_59][^1_6][^1_60][^1_7][^1_8][^1_9]</span>

<div align="center">⁂</div>
